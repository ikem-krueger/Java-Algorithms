dist: trusty

before_script:
 - export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
 - export MAVEN_OPTS="-Xmx2048m"
 - echo $JAVA_TOOL_OPTIONS
 - echo $MAVEN_OPTS

language: java

notifications:
  email:
    recipients:
      - stalk.calvin@gmail.com
    on_success: change
    on_failure: always

jdk:
  - oraclejdk8

before_install:
  - sudo apt-get install jq
  - wget -O ~/codacy-coverage-reporter-assembly-latest.jar $(curl https://api.github.com/repos/codacy/codacy-coverage-reporter/releases/latest | jq -r .assets[0].browser_download_url)

script: "mvn clean test jacoco:report coveralls:report"

after_success:
  - java -cp ~/codacy-coverage-reporter-assembly-latest.jar com.codacy.CodacyCoverageReporter -l Java -r target/site/jacoco/jacoco.xml --projectToken ae6a2f5f152b4f7bbdd99377aa44d28a

